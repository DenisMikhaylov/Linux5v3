---
Практическая работа:
    Название: 'Создание среды для практических работ.'
    Действие: 'Модуль Второй'
    Задача: ' Настройка безопасного подключения агента'
---
# **Настройка безопасного подключения агента**

В данной практической работе мы настроим безопасное подключение агента .

Этапы создания стенда:

- Настройка безопасного подключения агента

Имена пользователей и пароли:
```
Для denian
login: student 
password: 111

login: root 
password: 111
```
```
Для Windows
login: Student 
password: password
```
### **Практическая работа**

### **Задача 1: Установки агента на Gate **

1. Запустите терминул для виртуальной машины Gate под учетной записью студент указанной сверху.

2. Получите права супер пользователя.

```
student@server:~$ su -
```
```
< Введите пароль пользователя student >
```


# Настройка zabbix agent

Устанавливаем агента  на компьютеры, которые будут использоваться в рамках нашей инфраструктуры.


Прежде чем менять файл с настройками сгенерируем на своем компе psk фразу командой и записываем ее в файл
```
openssl rand -hex 32 > /etc/zabbix/zabbix_agent.psk
```
Далее выводим этот ключ на экран командой 
```

tail /etc/zabbix/zabbix_agent.psk
```
Сохраняем где нибудь у себя данный ключ он нам пригодиться при настройки серверной части заббикса
И вот теперь конфигурируем файл с настройками

```
nano /etc/zabbix/zabbix_agentd.conf
```

Меняем следующие значения:\
Server=    ваш ip adresss\
Hostname=  такой же нужно будет прописать на основном сервере\
TLSAccept=psk
TLSConnect=psk\
TLSPSKFile=/etc/zabbix/zabbix_agent.psk\
TLSPSKIdentity=<Hostname>  - тут меняйте значение на свое - такое же должно использоваться на серверной части\

```
systemctl restart zabbix-agent
systemctl enable zabbix-agent
```
